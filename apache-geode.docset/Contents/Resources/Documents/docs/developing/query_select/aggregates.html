<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      OQL Aggregate Functions |
    Geode Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/images/favicon.ico' rel='shortcut icon'>

  <script src="/javascripts/all.js"></script>
  
</head>

<body class="docs docs_developing docs_developing_query_select docs_developing_query_select_aggregates">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "apache.org";
    </script>

    <!--  -->

    <div class="container">

      <!--googleoff: index-->
      <!--  -->
      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        <!--  -->
        <!--   <h1 class="title-container">
    OQL Aggregate Functions
  </h1>
 -->
          <div id="js-quick-links" >
            
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        <!--
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to You under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<p>The aggregate functions 
<code>MIN</code>,
<code>MAX</code>,
<code>AVG</code>,
<code>AVG</code> over a DISTINCT expression,
<code>SUM</code> over a DISTINCT expression,
<code>COUNT</code>, and
<code>COUNT</code> over a DISTINCT expression
are supported.
The <code>GROUP BY</code> extension is also supported where appropriate.</p>

<p>The <code>MIN</code> function returns the smallest of the selected
expression.
The type of the expression must evaluate to a 
<code>java.lang.Comparable</code>.</p>

<p>The <code>MAX</code> function returns the largest of the selected
expression.
The type of the expression must evaluate to a 
<code>java.lang.Comparable</code>.</p>

<p>The <code>AVG</code> function returns the arithmetic mean of the set
formed by the selected expression.
The type of the expression must evaluate to a 
<code>java.lang.Number</code>.
For partitioned regions,
each node&rsquo;s buckets provide both a sum and the number of elements
to the node executing the query,
such that a correct average may be computed.</p>

<p>The <code>AVG</code> function where the DISTINCT modifier is applied
to the expression returns the arithmetic mean of the set
of unique (distinct) values.
The type of the expression must evaluate to a 
<code>java.lang.Number</code>.
For partitioned regions,
the distinct values in a node&rsquo;s buckets are returned
to the node executing the query.
The query node can then calculate the avarage over
the values that are unique across nodes,
after eliminating duplicate values that come from separate nodes.</p>

<p>The <code>SUM</code> function returns the sum over the set
formed by the selected expression.
The type of the expression must evaluate to a 
<code>java.lang.Number</code>.
For partitioned regions,
each node&rsquo;s buckets compute a sum over that node,
returning that sum
to the node executing the query,
when then sums across all nodes.</p>

<p>The <code>SUM</code> function where the DISTINCT modifier is applied
to the expression returns the sum over the set
of unique (distinct) values.
The type of the expression must evaluate to a 
<code>java.lang.Number</code>.
For partitioned regions,
the distinct values in a node&rsquo;s buckets are returned
to the node executing the query.
The query node can then calculate the sum over
the values that are unique across nodes,
after eliminating duplicate values that come from separate nodes.</p>

<p>The <code>COUNT</code> function returns the quantity of values in the set
formed by the selected expression.
For example, to return the quantity of employees who have a
positive sales amount:</p>
<pre class="highlight plaintext"><code>SELECT count(e.sales) FROM /employees e WHERE e.sales &gt; 0.0
</code></pre>

<p>The <code>COUNT</code> function where the DISTINCT modifier is applied
returns the quantity of unique (distinct) values in the set
formed by the selected expression.</p>

<h2 id="group-by-extension-for-aggregate-functions">GROUP BY Extension for Aggregate Functions</h2>

<p><code>GROUP BY</code> is required 
when aggregate functions are used in combination
with other selected items.
It permits ordering.
For example,</p>
<pre class="highlight plaintext"><code>SELECT ID, MAX(e.sales) FROM /employees e GROUP BY ID
</code></pre>

        <!-- 
 -->
      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    <!--  -->
  </footer>
</div><!--end of container-->

</body>
</html>
